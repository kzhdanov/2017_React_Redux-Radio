function Build(){var e=this.data[0];$("#WeekNumber").val(e.WeekNumber),$("#BandName").val(e.BandName),$("#AlbumName").val(e.AlbumName),$("#Genres").val(e.Genres),$("#Year").val(e.Year),$("#preView").val(e.preView),$("#mainText").val(e.mainText),$("#ImgName").val(e.ImgName),e.IsVisible?$("#IsVisible").prop("checked",!0):$("#IsVisible").prop("checked",!1),$("#Save").attr("data-id",e.id)}function EditClick(e,a){e.preventDefault(),$.ajax({method:"POST",async:!0,data:{id:a},url:"/RadioAdmin/Edit"}).done(function(e){"success"===e.type?Build.call(e):(toastr.warning("Ошибка редактирования элемента"),$("#Save").removeAttr("data-id"))}).fail(function(e){toastr.error("Oh, something went wrong..."),$("#Save").removeAttr("data-id")})}function DeleteClick(e,a){e.preventDefault();var t=e;$.ajax({method:"POST",async:!0,data:{id:a},url:"/RadioAdmin/Delete"}).done(function(e){"success"===e.type?(t.target.parentNode.parentNode.remove(),toastr.success("Элемент удален")):toastr.warning("Ошибка удаления элемента")}).fail(function(e){toastr.error("Oh, something went wrong...")})}!function(){function e(e){function a(e){var a=e.serializeArray(),t={};return $.map(a,function(e,a){t[e.name]=e.value}),t}var t=!0,r=a(e);return""!==r.WeekNumber&&0!==r.WeekNumber&&4===r.WeekNumber.length||(toastr.error("Номер недели должен состоять из 4-х цыфр..."),t=!1),""===r.BandName&&(toastr.error("Название группы должно быть заполнено..."),t=!1),""===r.AlbumName&&(toastr.error("Название альбома должно быть заполнено..."),t=!1),""===r.preView&&(toastr.warning("Превью должно быть заполнено..."),t=!1),""===r.mainText&&(toastr.warning("Список песен должно быть заполнено..."),t=!1),""===r.ImgName&&(toastr.warning("Имя картинки альбома должно быть заполнено или по умолчанию..."),t=!1),t}$("#Save").click(function(a){a.preventDefault();var t=$(this);if(!e($("#AddAlbumInfo")))return!1;if(t.hide(),$("#Save").attr("data-id")||""===$("#Save").attr("data-id")){var r=$("#AddAlbumInfo").serialize()+"&id="+$("#Save").attr("data-id");$.ajax({method:"POST",async:!0,data:{album:r},url:"/RadioAdmin/EditSave"}).done(function(e){t.show(),$("#Save").removeAttr("data-id"),"success"===e.type?toastr.success("Изменения внесены успешно"):toastr.error("Ошибка в процессе сохранения редактирования...")}).fail(function(e){t.show(),$("#Save").removeAttr("data-id"),toastr.error("Oh, something went wrong...")})}else $.ajax({method:"POST",async:!0,data:{album:$("#AddAlbumInfo").serialize()},url:"/RadioAdmin/Save"}).done(function(e){t.show(),"success"===e.type?toastr.success("Все успешно сохранилось"):toastr.error("Ошибка в процессе сохранения...")}).fail(function(e){t.show(),toastr.error("Oh, something went wrong...")})}),$("#Search").click(function(e){e.preventDefault();var a=$(this);a.hide(),$.ajax({method:"POST",async:!0,data:{week:Number($("#WeekNumberSearch").val())},url:"/RadioAdmin/Get"}).done(function(e){a.show(),$("table tbody").empty().html(e)}).fail(function(e){a.show(),toastr.error("Oh, something went wrong...")})})}();